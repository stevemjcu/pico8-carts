pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
--breadboard
--by zap

--milestones:
--wiring
--battery
--power/flow
--leds
--buttons
--gates (nand)
--backdrop

--ol={} --port list
--pl={} --plug list
rl={} --row list
h={}  --hand
pq={} --print queue

--<put constants here>

poke(24365,1)

function _init()
-- local p={}
-- p.x,p.y=36,36
-- p.w,p.h=8,8
-- add(pl,p)
-- h.p=nil
end

function _update()
 processinput()
 simulate()
end

function _draw()
 cls()
 drawboard()
 drawwires()
 drawhand()
 for p in all(pq) do
  print(p)
 end
 pq={}
end

-->8
--domain

--function getports()
-- --is this needed?
-- --encode into map?
--end

--function getplugs()
-- for i=0,15 do
--  for j=0,15 do
--   local s=mget(i,j)
--  end
-- end
-- --add to pl
--end

--function getcords()
-- --match pairs
-- --add to cl
--end

function processinput()
 h.x=stat(32)
 h.y=stat(33)
 local k=h.l
 h.l=stat(34)==1
-- if not k and h.l then
--  if(not h.p) grab()
-- elseif k and h.l then
--  if(h.p) drag()
-- elseif k and not h.l then
--  if(h.p) drop()
-- end
end

function grab()
-- for p in all(pl) do
--  if(abb(h,p)) h.p=p
-- end
end

function drag()
-- h.p.x=h.x-4
-- h.p.y=h.y-4
end

function drop()
-- local mx=flr((h.p.x+4)/8)
-- local my=flr((h.p.y+4)/8)
-- if fget(mget(mx,my),0) then
--  h.p.x=mx*8
--  h.p.y=my*8
-- end
-- h.p=nil
end

function simulate()
 --verlet integration?
end

function drawboard()
 map(0,0,0,0,16,16)
end

--function drawplugs()
-- for p in all(pl) do
--  spr(2,p.x,p.y)
-- end
--end

function drawwires()
end

function drawhand()
 spr(3,h.x,h.y) 
 --make grabby?
end

-->8
--universal

function abb(a,b)
 return not (
  a.x>b.x+b.w or
  a.x<b.x or
  a.y>b.y+b.h or
  a.y<b.y
 )
end

__gfx__
00000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006666000000000076000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700066556600008800077600000000880000000000000555500005550000055550000555000005555000000000000055000005555000055550000500500
0007700006511560008ee200777600000088880000cccc0000555500005555000051110000511500005551000000000000015000001155000015550000555500
0007700006500560008ee200770000000088880000cccc0000511500005115000050000000500500005110000000000000005000005511000001150000111500
00700700066556600002200000700000002882000011110000500500005551000055550000555100005555000000000000005000005555000055550000000500
00000000016666100000000000000000000220000000000000100100001110000011110000111000001111000000000000001000001111000011110000000100
00000000001111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00555500005555000055550000555500005555000055550000555500111111110000000000000000000000000000000000000000000000000000000000000000
00551100005111000011150000555500005555000051150000555100111111110000000000000000000000000000000000000000000000000000000000000000
00115500005555000000510000511500001115000050050000551000111111110000000000000000000000000000000000000000000000000000000000000000
00555500005555000005100000555500000005000055550000510000111111110000000000000000000000000000000000000000000000000000000000000000
00111100001111000001000000111100000001000011110000100000111111110000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000111111110000000000000000000000000000000000000000000000000000000000000000
__gff__
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000016060708090a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000150101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000c0101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000d0101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000e0101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000f0101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000100101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000110101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000120101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000130101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000140101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000020002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
